version: 1

namespace: ex

envfile: .env

before-all:
  quiet: true
  cmds:
    - echo "before all in root"
    - |
      echo "hello multi line"

      for i in {1..10}; do
        echo "lool $i"
      done
    - echo "MANO=cole" >> $ACT_ENV

acts:
  act0:
    cmds:
      - echo "hello act0"
      - echo "Rendered {{.MY_ENV_VAR}}"
      - echo "MY_ENV_VAR=$MY_ENV_VAR"

  act1:
    flags:
      - test:false
    cmds:
      - echo "root act 1"
      - echo "test=$FLAG_TEST"
      - echo "MANO IS=$MANO"

  act2:
    redirect: child/actfile.yml
  
  act3:
    acts:
      act31:
        cmds: echo "hello act31"
      act32:
        include: child/actfile.yml
  
  act4:
    cmds:
      - act: act2
      - act: act1 -test
  
  long1:
    cmds: while true; do echo "hello long1"; sleep 4; done
  
  long2:
    cmds: while true; do echo "hello long2"; sleep 2; done
  
  long3:
    cmds: act 

  all-long:
    parallel: true
    cmds:
      - act run -f={{.ActFilePath}} long1
      - act run -f={{.ActFilePath}} long2

  merda:
    cmds: |
      for i in {1..5}; do
        echo "saco de merda $i"
        sleep 4
      done

  child:
    include: child/actfile.yml
